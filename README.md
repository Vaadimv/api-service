# üß© API Service

**Oracle API Service** ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ FastAPI —Å web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö (Oracle, PostgreSQL, ClickHouse), —Å–æ–∑–¥–∞–≤–∞—Ç—å API-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ SQL –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø—Ä—è–º–æ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –≤–∏–¥–µ REST API.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Oracle (oracledb, cx_Oracle), PostgreSQL, ClickHouse
- –°–æ–∑–¥–∞–Ω–∏–µ SQL API —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ UI
- Docker-—Å–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ SQL –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+ (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ)
- Docker / Docker Compose (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- Oracle Instant Client (—É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω –≤ Docker-—Å–±–æ—Ä–∫—É)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: —á–µ—Ä–µ–∑ Docker

git clone git@github.com:Vaadimv/api-service.git
cd api-service
docker compose up --build

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000

–õ–æ–≥–∏–Ω: admin
–ü–∞—Ä–æ–ª—å: admin

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
–ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone git@github.com:Vaadimv/api-service.git
cd api-service

# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫–∞–µ–º
uvicorn main:app --reload

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
.
‚îú‚îÄ‚îÄ app/                 # –ú–∞—Ä—à—Ä—É—Ç—ã (API, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
‚îú‚îÄ‚îÄ static/              # CSS, –∏–∫–æ–Ω–∫–∏, –ª–æ–≥–æ—Ç–∏–ø
‚îú‚îÄ‚îÄ templates/           # HTML-—à–∞–±–ª–æ–Ω—ã (Jinja2)
‚îú‚îÄ‚îÄ database/api.db      # SQLite-–±–∞–∑–∞
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ FastAPI
‚îú‚îÄ‚îÄ app_core.py          # –õ–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ auth_utils.py        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ç–æ–∫–µ–Ω—ã
‚îú‚îÄ‚îÄ dynamic_routes.py    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è API```


üîê –ê–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –∞–¥–º–∏–Ω:
–õ–æ–≥–∏–Ω: admin
–ü–∞—Ä–æ–ª—å: admin
–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ: admin

üß™ –ü—Ä–∏–º–µ—Ä API-–∑–∞–ø—Ä–æ—Å–∞
GET /api/clients?user_id=123
Authorization: Bearer <token>

üì° –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ API (POST)
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—ã —Å–æ–∑–¥–∞–ª–∏ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç —Å –∏–º–µ–Ω–µ–º get_clients —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ client_id –∏ phone.

üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç–µ Bearer Token –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞–º–∏ (/manage-api-tokens).

üì§ –ó–∞–ø—Ä–æ—Å:
curl -X POST http://localhost:8000/api/get_clients \
     -H "Authorization: Bearer <–í–ê–®_–¢–û–ö–ï–ù>" \
     -H "Content-Type: application/json" \
     -d '{"client_id": 12345, "phone": "+79998887766"}'

üì• –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
[
  {
    "client_id": 12345,
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "phone": "+79998887766"
  }
]


üë®‚Äçüíª –ê–≤—Ç–æ—Ä
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ Vaadimv
–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤–∞–º –ø–æ–º–æ–≥ ‚Äî –ø–æ—Å—Ç–∞–≤—å—Ç–µ ‚≠êÔ∏è
