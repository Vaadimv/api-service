{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row g-4">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ª–æ–≥–æ—Ç–∏–ø, –ø—Ä–æ—Ñ–∏–ª—å –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="col-lg-4">
            <div class="card shadow-sm p-4 text-center bg-dark-panel text-white">
                <!-- –õ–æ–≥–æ—Ç–∏–ø -->
                <img src="/static/logo.png?v=3" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-shadow mb-4">

                <!-- –ò–∫–æ–Ω–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <img src="/static/user-icon.png" alt="User Icon"
                     class="mb-3 mx-auto d-block"
                     style="width: 112px; height: 112px; object-fit: cover;">

                <h5 class="mb-1">{{ user['username'] }}</h5>
                <p class="text-muted small mb-4" >–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ API üëã</p>

                <div class="d-grid gap-2">
                    <a href="/manage-connectors" class="btn btn-primary btn-sm py-2">üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–∞–º–∏</a>
                    <a href="/create-api" class="btn btn-success btn-sm py-2">‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API</a>
                    <a href="/manage-apis" class="btn btn-secondary btn-sm py-2">üì° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API</a>
                    <a href="/manage-users" class="btn btn-outline-dark btn-sm py-2">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                    <a href="/manage-api-tokens" class="btn btn-outline-primary btn-sm py-2">üîë API –¢–æ–∫–µ–Ω—ã</a>
                    <a href="/logout" class="btn btn-outline-danger btn-sm py-2">‚úñÔ∏è –í—ã–π—Ç–∏</a>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö API -->
        <div class="col-lg-8">
            <div class="card shadow-sm p-4">
                <h5 class="mb-4">üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ API</h5>
                {% if apis %}
                <div class="table-responsive">
                    <table class="table table-hover align-middle table-sm">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>–≠–Ω–¥–ø–æ–∏–Ω—Ç</th>
                                <th>–ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä</th>
                                <th>–¢–∏–ø –ë–î</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for api in apis %}
                            <tr>
                                <td>{{ api["id"] }}</td>
                                <td><code>/api/{{ api["endpoint_name"] }}</code></td>
                                <td>{{ api["connector_name"] }}</td>
                                <td>{{ api["db_type"] }}</td>
                                <td>
                                    {% if api["active"] %}
                                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                                    {% else %}
                                        <span class="badge bg-secondary">–û—Ç–∫–ª—é—á–µ–Ω</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                    <div class="alert alert-warning text-center mb-0">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö API.</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<div class="position-fixed bottom-0 end-0 p-3 text-muted small" style="z-index: 1000;">
    <span>¬© 2025 Vadim Yakovlev</span>
</div>
{% endblock %}
